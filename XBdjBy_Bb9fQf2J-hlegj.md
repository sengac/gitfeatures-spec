onVisibilityToggle in the tree:
- recalculate the selectedTreeIndex for the selected node if any node was expanded or collapsed
- if the selected node cannot be found in the visible list, select the node that was collapsed